<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <meta name="viewport" content="width=200, initial-scale=1.0"/>
        <style>  
        </style>
    </head>
    <body> 
            <p style="user-select: none;">
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
                Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.
                Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.
            </p>
            <div  >
            <svg id="multiScreenSvg"  width="683" height="384" style=" width:683px;height:384px;background-color:rgba(2, 2, 14, 0.938) ;border:50px solid grey">  
             
                    <rect id="leftResponsivePanel" fill="#01000383" stroke="blue"   x="0" y="0"  opacity="0"      width="10" height="40" />
                    <rect id="rightResponsivePanel" fill="#01000383" stroke="blue"   x="0" y="0" opacity="0"    width="10" height="40" />
                    <rect id="bottomResponsivePanel" fill="#01000383" stroke="blue"  x="0" y="0" opacity="0"    width="40" height="10" />
                    <rect id="topResponsivePanel" fill="#01000383" stroke="blue"   x="0" y="0"  opacity="0"   width="40" height="10" /> 
                 
                <!-- <rect x="50" y="50" width="50" height="50"  style=" fill: none; stroke:blueviolet;stroke-width:15;stroke-dasharray: 0 10 30 10"></rect> 
                <ellipse cx="255" cy="255" rx="50" ry="50" style="fill:none;stroke: #01000383;stroke-width:30;stroke-dasharray:50 215 ; " />
                -->
            </svg> 
            </div>
        
        <script>
            rectMouseOver=false;
            responsivePanelWidth=10;
            //responsivePanelHeight=40;
            responsivePanelsDistConst=5;
            responsivePanelEntered=false;
            responsivePanelShow=false;
            function showResponsivePanelOnRect($rect){ 
                responsivePanelShow=true; 
                $width=Number($rect.attr("width"));
                $height=Number($rect.attr("height"));
                $x=Number($rect.attr("x"));
                $y=Number($rect.attr("y")); 
                $leftResponsivePanel= $("#leftResponsivePanel");
                $rightResponsivePanel=$("#rightResponsivePanel");
                $topResponsivePanel=$("#topResponsivePanel");
                $bottomResponsivePanel=$("#bottomResponsivePanel");

                $leftResponsivePanel.attr("y",($y+responsivePanelWidth));
                $leftResponsivePanel.attr("x",$x);
                $leftResponsivePanel.attr("width",responsivePanelWidth);
                $leftResponsivePanel.attr("height",$height-2*responsivePanelWidth);

                $rightResponsivePanel.attr("y",($y+responsivePanelWidth));
                $rightResponsivePanel.attr("x",($x+$width-responsivePanelWidth));
                $rightResponsivePanel.attr("width",responsivePanelWidth);
                $rightResponsivePanel.attr("height",$height-2*responsivePanelWidth);

                $topResponsivePanel.attr("x",($x+responsivePanelWidth));
                $topResponsivePanel.attr("y",$y);
                $topResponsivePanel.attr("width",$width-2*responsivePanelWidth);
                $topResponsivePanel.attr("height",responsivePanelWidth); 

                $bottomResponsivePanel.attr("x",($x+responsivePanelWidth));
                $bottomResponsivePanel.attr("y",($y+$height-responsivePanelWidth));
                $bottomResponsivePanel.attr("width",$width-2*responsivePanelWidth);
                $bottomResponsivePanel.attr("height",responsivePanelWidth);  
                
                $leftResponsivePanel.attr("opacity",0.5); 
                $rightResponsivePanel.attr("opacity",0.5);
                $topResponsivePanel.attr("opacity",0.5);
                $bottomResponsivePanel.attr("opacity",0.5);

                $leftResponsivePanel.css("pointer-events","auto");
                $rightResponsivePanel.css("pointer-events","auto");
                $topResponsivePanel.css("pointer-events","auto");
                $bottomResponsivePanel.css("pointer-events","auto");
                
                $leftResponsivePanel.appendTo("#multiScreenSvg");
                $rightResponsivePanel.appendTo("#multiScreenSvg");
                $topResponsivePanel.appendTo("#multiScreenSvg");
                $bottomResponsivePanel.appendTo("#multiScreenSvg");
            }
            function hideResponsivePanel($pnl){ 
                $pnl.attr("opacity",0);  
                $pnl.css("pointer-events","none"); 
                $pnl.attr("stroke","blue");
                $pnl.attr("fill","#01000383");
                $pnl.attr("stroke-dasharray","2 2"); 
            }

            function hideResponsivePanels(){  
                responsivePanelShow=false;
                hideResponsivePanel($("#leftResponsivePanel"));
                hideResponsivePanel($("#rightResponsivePanel"));
                hideResponsivePanel($("#topResponsivePanel"));
                hideResponsivePanel($("#bottomResponsivePanel")); 
            }

            function responsiveElmntEnteredStyle($elmnt){  
                $elmnt.mouseenter( function(e){
                    responsivePanelEntered=true; 
                    if(responsivePanelShow){ 
                        $(this).attr("opacity",1);
                        $(this).attr("stroke","yellow");
                        $(this).attr("stroke-dasharray","0");
                        $(this).attr("fill","#091010");
                    } 
                });
            }

            function responsiveElmntLeaveStyle($elmnt){
                $elmnt.mouseleave(function(e){ 
                    console.log("geldiii");
                    responsivePanelEntered=false;
                    if(responsivePanelShow){
                        $(this).attr("opacity",0.5);
                        $(this).attr("stroke","blue");
                        $(this).attr("fill","#01000383");
                        $(this).attr("stroke-dasharray","2 2"); 
                    }
                }); 
            }


            function buildResponsivePanel(){
                
                $("rect").each(function( ){  
                    responsiveElmntEnteredStyle($(this));
                    responsiveElmntLeaveStyle($(this));
                }); 

                $("#leftResponsivePanel").mouseup(function(e){ 
                    if(responsivePanelShow){
                        if(resizable){
                            $targetX=Number($(this).attr("x"));
                            $resizedX=Number(clickedRect.attr("x"));
                            $targetWidth=Number($(this).attr("width"));
                            $resizedWidth=Number(clickedRect.attr("width"));
                            if(resizeCursor==6){
                                clickedRect.attr("width",$targetX-$resizedX-2);
                            }
                            if(resizeCursor==4){
                                clickedRect.attr("x",$targetX);
                                clickedRect.attr("width",$resizedWidth+$resizedX-$targetX);
                            } 
                        }    
                    } 
                });
                $("#rightResponsivePanel").mouseup(function(e){ 
                    if(responsivePanelShow){
                        if(resizable){ 
                            $targetX=Number($(this).attr("x"));
                            $resizedX=Number(clickedRect.attr("x"));
                            $targetWidth=Number($(this).attr("width"));
                            $resizedWidth=Number(clickedRect.attr("width"));
                            if(resizeCursor==6){
                                clickedRect.attr("width",$targetWidth+$targetX-$resizedX);
                            } 
                            if(resizeCursor==4){
                                clickedRect.attr("x",$targetX+$targetWidth+2);
                                clickedRect.attr("width",$resizedWidth+$resizedX-($targetX+$targetWidth+2));
                            }
                            
                        }    
                    }
                });
                $("#topResponsivePanel").mouseup(function(e){ 
                    if(responsivePanelShow){
                        if(resizable){
                            $targetY=Number($(this).attr("y"));
                            $resizedY=Number(clickedRect.attr("y"));
                            $targetHeight=Number($(this).attr("height"));
                            $resizedHeight=Number(clickedRect.attr("height"));     
                            if(resizeCursor==2){ 
                                clickedRect.attr("height",$targetY-$resizedY-2);
                            } 
                            if(resizeCursor==8){
                                clickedRect.attr("y",$targetY);
                                clickedRect.attr("height",$resizedHeight+$resizedY-$targetY); 
                            }
                        }    
                    }
                });
                $("#bottomResponsivePanel").mouseup(function(e){ 
                    if(responsivePanelShow){
                        if(resizable){ 
                            $targetY=Number($(this).attr("y"));
                            $resizedY=Number(clickedRect.attr("y"));
                            $targetHeight=Number($(this).attr("height"));
                            $resizedHeight=Number(clickedRect.attr("height"));     
                            if(resizeCursor==2){ 
                                clickedRect.attr("height",$targetHeight+$targetY-$resizedY);
                            } 
                            if(resizeCursor==8){
                                clickedRect.attr("y",$targetY+$targetHeight+2);
                                clickedRect.attr("height",$resizedHeight+$resizedY-($targetY+$targetHeight+2));
                            }
                        }    
                    }
                });
            }

            $(function(){
                buildResponsivePanel(); 
            });
             
            var clicked={
                posX:-1,
                posY:-1
            } 
            var svgMouseEnter=false;
            var rectDragging=false;
            var resizable=false;
            var resizeCursor=0;
            var resizeCursorSensitive=8;
            var rectCount=0;
            var clickedRect=null;
            var svgMouseDown=false;
            var rectMouseDown=false;
            svgNS="http://www.w3.org/2000/svg";
            $("#rect-1").css("x","100");
            $("#rect-1").css("y","100");
            $("#multiScreenSvg").mousedown(function (e){  
                if(!resizable){
                    clicked.posX=e.offsetX;
                    clicked.posY=e.offsetY;
                } 
                if(resizeCursor==0){
                    resizable=false;  
                }  
                else{
                    resizable=true;
                } 
                
                if(clickedRect!=null&&!rectMouseDown&&!resizable){
                    BlueStrokeStyle(clickedRect);
                    clickedRect=null;
                }   

                if(!rectMouseDown){
                    svgMouseDown=true; 
                    if(!resizable){
                        clicked.posX=e.offsetX;
                        clicked.posY=e.offsetY;
                        var $rect = $(document.createElementNS(svgNS, 'rect')) 
                        .attr({
                            id:"rect"+rectCount,
                            x: e.offsetX,
                            y: e.offsetY, 
                            width: 0,
                            height: 0  
                        })
                        .css({  
                            fill: "black", 
                            "outline-style": "solid ",
                            "outline-color":"red ",  
                            "outline-width": "thin", 
                            "outline-offset": "0px",   
                        });
                        dragElement($rect);  
                        if(clickedRect!=null){
                            BlueStrokeStyle(clickedRect);
                            StrokeDasharrayStyle(clickedRect,2,2);
                        }
                        clickedRect=$rect;  
                        $rect.appendTo("#multiScreenSvg"); 
                    }
                    
                } 
            }); 
 
            $("#multiScreenSvg").mouseleave(function(e){ 
                if(!resizable)
                    document.body.style.cursor="default"; 
            });
            
            
            $("#multiScreenSvg").mousemove(function(e){ 
                
                //console.log(e.offsetX+ " " +e.offsetY);  
                if(clickedRect!=null){ 
                    if(resizable&&!rectMouseOver&&!responsivePanelEntered)
                        hideResponsivePanels();
                    if(!svgMouseDown){ 
                        var $currentX=Number(e.offsetX); 
                        var $currentY=Number(e.offsetY);
                        var $x=Number( clickedRect.attr("x"));
                        var $y=Number(clickedRect.attr("y"));
                        var $width=Number(clickedRect.attr("width"));
                        var $height=Number(clickedRect.attr("height")); 
                        
                        $topLine= $currentY <= $y+resizeCursorSensitive &&  $currentY+resizeCursorSensitive  >= $y ;
                        $bottomLine=  $currentY >= ($y+$height)-resizeCursorSensitive &&  $currentY-resizeCursorSensitive <= ($y+$height);
                        $leftLine=$currentX <= $x+resizeCursorSensitive &&  $currentX+resizeCursorSensitive  >= $x;
                        $rightLine= $currentX >= ($x+$width)-resizeCursorSensitive && $currentX-resizeCursorSensitive <= ($x+$width) ;

                        $heightLength= $currentY > ($y+10) && $currentY<($y+$height-10) ;
                        $widthLength= $currentX > ($x+10) && $currentX<($x+$width-10) ;
                        
                        if(!rectMouseDown){  
                            if( $leftLine && $topLine ){
                                document.body.style.cursor="se-resize"; 
                                resizeCursor=7;  
                            }
                            else if( $rightLine && $bottomLine ){
                                document.body.style.cursor="se-resize";
                                resizeCursor=3; 
                            }
                            else if(  $rightLine && $topLine){ 
                                document.body.style.cursor="sw-resize";  
                                resizeCursor=9; 

                            } 
                            else if( $leftLine &&  $bottomLine){
                                document.body.style.cursor="sw-resize";  
                                resizeCursor=1;      
                            }     
                            else if(  $bottomLine  && $widthLength ){
                                document.body.style.cursor="s-resize";        
                                resizeCursor=2;
                            }
                            else if( $rightLine  && $heightLength ){
                                document.body.style.cursor="e-resize";        
                                resizeCursor=6;
                            } 
                            else if(  $topLine  && $widthLength ){
                                document.body.style.cursor="s-resize";        
                                resizeCursor=8;
                            }
                            else if(  $leftLine  && $heightLength ){
                                document.body.style.cursor="e-resize";        
                                resizeCursor=4;
                            } 
                            else {
                                if(rectMouseOver)
                                    document.body.style.cursor="pointer"; 
                                else
                                    document.body.style.cursor="default"; 
                                resizeCursor=0; 
                            } 
                        } 
                         
                    }

                    if( resizable){  
                        var $posX=e.offsetX;
                        var $posY=e.offsetY;
                        var $width=Number(clickedRect.attr("width"));    
                        var $height=Number(clickedRect.attr("height"));    
                        var $lenthDiffX=Math.abs($posX-clicked.posX);
                        var $lenthDiffY=Math.abs($posY-clicked.posY);
                        var x=Number(clickedRect.attr("x"));
                        var y=Number(clickedRect.attr("y")); 

                        if(resizeCursor==7){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            if($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;
                            if($posY>clicked.posY)
                                $height=$height-$lenthDiffY; 
                            else
                                $height=$height+$lenthDiffY;   
                        }

                        if(resizeCursor==9){ 
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            if($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                            if($posY>clicked.posY)
                                $height=$height-$lenthDiffY; 
                            else
                                $height=$height+$lenthDiffY;                            
                        }

                        if(resizeCursor==1){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                            
                            if ($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY; 
                        }  
                        
                        if(resizeCursor==3){ 
                            if ($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY;
                        } 

                        if(resizeCursor==8){  
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            
                            if ($posY>clicked.posY){ 
                                $height=$height-$lenthDiffY;  
                            }  
                            else{ 
                                $height=$height+$lenthDiffY;  
                            }
                                
                        }   

                        if(resizeCursor==2){  
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY;                             
                        } 

                        if(resizeCursor==4){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                            
                            if ($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;                             
                        }    
                        
                        if(resizeCursor==6){
                            if ($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                        }   
                        clickedRect.css("pointer-events","none"); 
                        clickedRect.attr("width",$width );
                        clickedRect.attr("height",$height);
                        clicked.posX=$posX;
                        clicked.posY=$posY;
                         
                        
                    }  

                    else if(rectMouseDown){ 
                        rectDragging=true; 
                        var $x= Number(clickedRect.attr("x"));
                        var $y= Number(clickedRect.attr("y"));
                        var $lenthDiffX=e.offsetX - clicked.posX;
                        var $lenthDiffY=e.offsetY - clicked.posY;  
                    
                        clickedRect.attr("x",($x+$lenthDiffX));
                        clickedRect.attr("y",($y+$lenthDiffY));    
                        
                        clicked.posX=(e.offsetX) ;
                        clicked.posY=(e.offsetY); 
                    }

                    else if(svgMouseDown ){  
                    
                        clickedRect.attr("x",clicked.posX);
                        clickedRect.attr("y",clicked.posY);
                        var $posX=e.offsetX;
                        var $posY=e.offsetY;
                        
                        if($posX<clicked.posX){
                            clickedRect.attr("x",$posX); 
                        }  
                        if($posY<clicked.posY) { 
                            clickedRect.attr("y",$posY);
                        } 
                        clickedRect.attr("width",Math.abs($posX-clicked.posX));
                        clickedRect.attr("height",Math.abs($posY-clicked.posY)); 
                    }  
                }      
            });
            
            
            $(window).on("mouseup",function(){
                
                if(clickedRect!=null){
                    if(resizable){
                        clickedRect.appendTo("#multiScreenSvg"); 
                        clickedRect.css("pointer-events","auto");
                    }
                        
                    RedStrokeStyle(clickedRect);
                    StrokeDasharrayStyle(clickedRect,2,2); 
                    var $width=Number(clickedRect.attr("width"));
                    var $height=Number(clickedRect.attr("height"));
                    var $x=Number(clickedRect.attr("x"));
                    var $y=Number(clickedRect.attr("y"));
                    
                    if(resizable ||svgMouseDown){
                        if($x<1){
                            clickedRect.attr("x",1);
                            clickedRect.attr("width",(($x-1)+$width));
                            $width=$width+$x;
                            $x=1;
                            
                        }
                        if(($x+$width)>682){  
                            clickedRect.attr("width",682-$x) ;
                        }    
                        if($y<1){
                            clickedRect.attr("y",1);
                            clickedRect.attr("height",(($y-1)+$height )) ;
                            $height=$height+$y;
                            $y=1; 
                        }
                        if(($y+$height)>383){ 
                            console.log("helppp"+$height);
                            clickedRect.attr("height",383-$y) ;
                        } 
                    }
                    
                    if(svgMouseDown){  
                        svgMouseDown=false;
                        if(clickedRect.attr("width")<30||clickedRect.attr("height")<30){
                            clickedRect.remove();
                            clickedRect=null;
                        } 
                        else
                            rectCount++;
                    }   

                    if(rectDragging){
                        if($x<1){
                            clickedRect.attr("x",1); 
                        }
                        else if(($x+$width)>682){  
                            clickedRect.attr("x",682-$width) ;
                        }    
                        if($y<1){
                            clickedRect.attr("y",1); 
                        }
                        if(($y+$height)>383){ 
                            clickedRect.attr("y",383-$height) ;
                        }
                    }  

                    
                }  
                
                document.body.style.cursor="default"; 
                rectMouseDown=false;  
                rectDragging=false;
                resizable=false; 
                resizeCursor=0; 
                responsivePanelEntered=false;
                responsivePanelShow=false;
                hideResponsivePanels();
                
            }); 
              

            function RedStrokeStyle($elmnt){
                $elmnt.css({
                    "outline-color":"red "
                }); 
            }
            function BlueStrokeStyle($elmnt){
                $elmnt.css({
                    "outline-color":"blue "
                }); 
            } 
            function StrokeDasharrayStyle($elmnt,part1,part2){
                $elmnt.css({
                   // "outline-style": "dashed "
                }); 
            }

            

            function dragElement($elmnt){   
                $elmnt.mouseleave(function(e){ 
                    rectMouseOver=false;  
                });

                $elmnt.mousedown(function(e){
                    console.log("gedlii"); 
                    if(resizeCursor==0){
                        resizable=false;  
                    }  
                    else{
                        resizable=true;
                    }  

                    if(!rectMouseDown&&!resizable){  
                        rectMouseDown=true; 
                        if(clickedRect!=null){
                            BlueStrokeStyle(clickedRect);
                            StrokeDasharrayStyle(clickedRect,2,2); 
                        }   
                        clickedRect=$(this); 
                        RedStrokeStyle(clickedRect);
                        StrokeDasharrayStyle(clickedRect,0,0); 
                        clickedRect.appendTo("#multiScreenSvg"); 
                    } 
                    clicked.posX=e.offsetX;
                    clicked.posY=e.offsetY; 
                }); 

                $elmnt.mousemove(function(e){  
                    rectMouseOver=true; 
                    if(resizable&&$(this).attr("id")!=clickedRect.attr("id")){ 
                        $(this).appendTo("#multiScreenSvg");
                        clickedRect.appendTo("#multiScreenSvg");
                        showResponsivePanelOnRect($elmnt);
                    }
                });
            }  

        </script>
    </body>
</html>
 