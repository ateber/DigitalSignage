<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <meta name="viewport" content="width=200, initial-scale=1.0"/>
        <style>  
        </style>
    </head>
    <body> 
            <p style="user-select: none;">
                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.
                Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.
                Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.
            </p>
        <div id="multiScreenDiv"  style=" width:683px;height:384px;background-color:rgba(2, 2, 14, 0.938) ;border:7px solid grey">
            <svg id="multiScreenSvg" width="683" height="384">  
                <!-- <rect x="50" y="50" width="50" height="50" style=" fill: aqua;"></rect> -->
            </svg> 
        </div>  
        
        <script>
            var clicked={
                posX:-1,
                posY:-1
            } 
            var svgMouseEnter=false;
            var resizable=false;
            var resizeCursor=0;
            var resizeCursorSensitive=5;
            var rectCount=0;
            var clickedRect=null;
            var svgMouseDown=false;
            var rectMouseDown=false;
            svgNS="http://www.w3.org/2000/svg";
            $("#rect-1").css("x","100");
            $("#rect-1").css("y","100");
            $("#multiScreenSvg").mousedown(function (e){  
                if(!rectMouseDown){
                    svgMouseDown=true;  
                    clicked.posX=e.offsetX;
                    clicked.posY=e.offsetY;
                    var $rect = $(document.createElementNS(svgNS, 'rect')) 
                    .attr({
                        id:"rect"+rectCount,
                        x: e.offsetX,
                        y: e.offsetY, 
                        width: 0,
                        height: 0  
                    })
                    .css({  
                        fill: "green", 
                        "outline-style": "solid ",
                        "outline-color":"blue ",  
                        "outline-width": "thin", 
                        "outline-offset": "-1px",  
                    });
                    dragElement($rect); 
                    resizeElement($rect);
                    if(clickedRect!=null){
                        BlueStrokeStyle(clickedRect);
                        StrokeDasharrayStyle(clickedRect,2,2);
                    }
                    clickedRect=$rect;    
                    
                    $rect.appendTo("#multiScreenSvg"); 
                } 
            }); 
            
            $("#multiScreenSvg").mousemove(function(e){ 
                
                    if(resizable ){  
                        var $posX=e.offsetX;
                        var $posY=e.offsetY;
                        var $width=Number(clickedRect.attr("width"));    
                        var $height=Number(clickedRect.attr("height"));    
                        var $lenthDiffX=Math.abs($posX-clicked.posX);
                        var $lenthDiffY=Math.abs($posY-clicked.posY);
                        var x=Number(clickedRect.attr("x"));
                        var y=Number(clickedRect.attr("y")); 
                         
                        if(resizeCursor==7){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            if($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;
                            if($posY>clicked.posY)
                                $height=$height-$lenthDiffY; 
                            else
                                $height=$height+$lenthDiffY;  
                        }
                        if(resizeCursor==9){ 
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            if($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                            if($posY>clicked.posY)
                                $height=$height-$lenthDiffY; 
                            else
                                $height=$height+$lenthDiffY;                            
                        }

                        if(resizeCursor==1){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                             
                            if ($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY; 
                        }  
                        
                        if(resizeCursor==3){ 
                            if ($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY;
                        } 

                        if(resizeCursor==8){  
                            clickedRect.attr("y",y+($posY-clicked.posY));
                            
                            if ($posY>clicked.posY){ 
                                $height=$height-$lenthDiffY;  
                            }  
                            else{ 
                                $height=$height+$lenthDiffY;  
                            }
                                
                        }   

                        if(resizeCursor==2){  
                            if ($posY>clicked.posY)
                                $height=$height+$lenthDiffY; 
                            else
                                $height=$height-$lenthDiffY;                             
                        } 

                        if(resizeCursor==4){
                            clickedRect.attr("x",x+($posX-clicked.posX));
                            
                            if ($posX>clicked.posX)
                                $width=$width-$lenthDiffX;
                            else
                                $width=$width+$lenthDiffX;                             
                        }    
                        
                        if(resizeCursor==6){
                            if ($posX>clicked.posX)
                                $width=$width+$lenthDiffX;
                            else
                                $width=$width-$lenthDiffX;
                        }   

                        clickedRect.attr("width",$width );
                        clickedRect.attr("height",$height);
                        clicked.posX=$posX;
                        clicked.posY=$posY; 
                        
                    }  
                    else if(rectMouseDown){ 
                         
                        var $x= Number(clickedRect.attr("x"));
                        var $y= Number(clickedRect.attr("y"));
                        var $lenthDiffX=e.offsetX - clicked.posX;
                        var $lenthDiffY=e.offsetY - clicked.posY;  
                       
                        clickedRect.attr("x",($x+$lenthDiffX));
                        clickedRect.attr("y",($y+$lenthDiffY));    
                        
                        clicked.posX=(e.offsetX) ;
                        clicked.posY=(e.offsetY); 
                    }
                    else if(svgMouseDown ){  
                       
                    clickedRect.attr("x",clicked.posX);
                    clickedRect.attr("y",clicked.posY);
                    var $posX=e.offsetX;
                    var $posY=e.offsetY;
                     
                    if($posX<clicked.posX){
                        clickedRect.attr("x",$posX); 
                    }  
                    if($posY<clicked.posY) { 
                        clickedRect.attr("y",$posY);
                    } 
                    clickedRect.attr("width",Math.abs($posX-clicked.posX));
                    clickedRect.attr("height",Math.abs($posY-clicked.posY)); 
                }  
                 
            });
 
            
            $(window).on("mouseup",function(){
                if(svgMouseDown){   
                    rectCount++;
                    svgMouseDown=false;
                    if(clickedRect.attr("width")<30||clickedRect.attr("height")<30)
                        clickedRect.remove(); 
                } 
                if(clickedRect.attr("x")<1){
                  
                   
                }   
                    
                if(clickedRect.attr("y")<1)   
                     
                RedStrokeStyle(clickedRect);
                StrokeDasharrayStyle(clickedRect,2,2); 
                rectMouseDown=false;
                resizable=false;
                 
            });  

            function RedStrokeStyle($elmnt){
                $elmnt.css({
                    "outline-color":"red "
                }); 
            }
            function BlueStrokeStyle($elmnt){
                $elmnt.css({
                    "outline-color":"blue "
                }); 
            } 
            function StrokeDasharrayStyle($elmnt,part1,part2){
                $elmnt.css({
                   // "outline-style": "dashed "
                }); 
            }

             

            function dragElement($elmnt){  
                $elmnt.mousedown(function(e){
                    if(!rectMouseDown){ 
                        rectMouseDown=true; 

                        if(clickedRect!=null){
                            BlueStrokeStyle(clickedRect);
                            StrokeDasharrayStyle(clickedRect,2,2); 
                        }  

                        clickedRect=$(this);
                        RedStrokeStyle(clickedRect);
                        StrokeDasharrayStyle(clickedRect,0,0); 
                        clickedRect.appendTo("#multiScreenSvg");
                        
                        clicked.posX=e.offsetX;
                        clicked.posY=e.offsetY;

                        if(resizeCursor==0){
                            resizable=false; 
                            
                        }  
                        else
                            resizable=true;  
                    } 
                }); 
            } 

            function resizeElement($elmnt){  
                $elmnt.mousemove(function(e){ 
                    if(clickedRect.attr("id")==$(this).attr("id")&& svgMouseDown==false ){
                        
                        var $currentX=Number(e.offsetX); 
                        var $currentY=Number(e.offsetY);
                        var $x=Number( $elmnt.attr("x"));
                        var $y=Number($elmnt.attr("y"));
                        var $width=Number($elmnt.attr("width"));
                        var $height=Number($elmnt.attr("height")); 
                        
                        $topLine= $currentY <=$y+resizeCursorSensitive ;
                        $bottomLine=  $currentY >= ($y+$height)-resizeCursorSensitive ;
                        $leftLine=$currentX <= $x+resizeCursorSensitive;
                        $rightLine= $currentX >= ($x+$width)-resizeCursorSensitive ;

                        $heightLength= $currentY > ($y+10) && $currentY<($y+$height-10) ;
                        $widthLength= $currentX > ($x+10) && $currentX<($x+$width-10) ;
                        
                        if(!rectMouseDown){  
                            if( $leftLine && $topLine ){
                                $elmnt.css("cursor","se-resize"); 
                                resizeCursor=7;  
                            }
                            else if( $rightLine && $bottomLine ){
                                $elmnt.css("cursor","se-resize");
                                resizeCursor=3; 
                            }
                            else if(  $rightLine && $topLine){
                                $elmnt.css("cursor","sw-resize");  
                                resizeCursor=9; 

                            } 
                            else if( $leftLine &&  $bottomLine){
                                $elmnt.css("cursor","sw-resize");  
                                resizeCursor=1;      
                            }     
                            else if(  $bottomLine  && $widthLength ){
                                $elmnt.css("cursor","s-resize");        
                                resizeCursor=2;
                            }
                            else if( $rightLine  && $heightLength ){
                                $elmnt.css("cursor","e-resize");        
                                resizeCursor=6;
                            } 
                            else if(  $topLine  && $widthLength ){
                                $elmnt.css("cursor","s-resize");        
                                resizeCursor=8;
                            }
                            else if(  $leftLine  && $heightLength ){
                                $elmnt.css("cursor","e-resize");        
                                resizeCursor=4;
                            } 
                            else {
                                $elmnt.css("cursor","pointer");  
                                resizeCursor=0; 
                            }
                            
                        }     
                    }
                    else{
                        if(!resizable){
                            $elmnt.css("cursor","pointer");  
                            resizeCursor=0;
                        }
                            
                    } 
                }); 
                 
                
            }  
        </script>
    </body>
</html>
 