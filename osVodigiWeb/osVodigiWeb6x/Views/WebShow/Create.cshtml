@model osVodigiWeb6x.Models.WebShow

@{
    ViewBag.Title = "Create";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

<script type="text/javascript" lang="javascript">
    $(function () {
        $("input:text:visible:first").focus();
    });
    function ShowView() { 
        var selectedValue = $("#lstURLAddress option:selected").val(); 
        var urlAddressSource = getURLAddressSource(selectedValue);
        $("#URLAddressView").attr("href", urlAddressSource);
        $("#URLAddressView").text(urlAddressSource);
    }
    function ShowWebShowView() {
        $("#URLWebShowPreview").show(); 
        var selectedValue = $("#lstWebShowURLAddresses option:selected").val();
        var urlAddressSource = getURLAddressSource(selectedValue);
        $("#URLWebShowPreview").attr("href", urlAddressSource);
        $("#URLWebShowPreview").text(urlAddressSource);
    }
    function getURLAddressID(value){
        var index = value.indexOf('|');
        if (index != 0 || index != null)
            return value.substring(0, index);
        return "";
    } 
    function getURLAddressSource(value) { 
        var index = value.indexOf('|');
        if (index != 0 || index != null)
            return value.substring(index+1, value.length);
        return "";
    } 
    function AddToWebShow() {
        var selectedOptions = $("#lstURLAddress option:selected");
        selectedOptions.each(function (index) {
            var urlAddressName = $(this).text(); 
            var urlAddress = $(this).val();
            if (urlAddressName != "" && urlAddress != "") {
                var option = new Option(urlAddressName, urlAddress, false, false);
                $('#lstWebShowURLAddresses').append(option);
                PopulateurlAddressesStore();
            }    
        }); 
    }
    function RemoveFromWebShow() {
        $("#lstWebShowURLAddresses option:selected").remove();
        PopulateurlAddressesStore();
    }
    function MoveItemUp() {
        $('#lstWebShowURLAddresses option:selected').each(function () {
            $(this).insertBefore($(this).prev());
        });
        PopulateurlAddressesStore();
    }
    function MoveItemDown() {
        $('#lstWebShowURLAddresses option:selected').each(function () {
            $(this).insertAfter($(this).next());
        });
        PopulateurlAddressesStore();
    }
    function PopulateurlAddressesStore() {
        var urlAddresses = ''; 
        $('#lstWebShowURLAddresses > option').each(function () { 
            urlAddressId = getURLAddressID(this.value);
            urlAddresses += '|' + urlAddressId; 
        });
        $('#txtWebShowURLAddresses').attr("value", urlAddresses);
    } 
     
</script>

<br />
<div class="textblock">
    <table class="instructions">
        <tr>
            <td style="width:100px;"><img src="~/urlAddresses/webshow-icon.png" alt="" style="border-radius:8px 8px;width:70px;height:70px;" /></td>
            <td>
                <span class="paragraphheader">Add Web Show</span><br />
                <span class="paragraphtext">Please enter the appropriate information to add a new web show.</span>
            </td>
        </tr>
    </table>
</div>
<br />
@using (Html.BeginForm())
{

    <table class="formtable" style="border-spacing:0;border-collapse:collapse;" role="presentation">
        <tr>
            <td class="formheader" colspan="2">Add Web Show</td>
        </tr>
        <tr>
            <td class="formprimary"><b>Web Show Name: <span class="required">*</span></b></td>
            <td class="formprimary">
                @Html.TextBoxFor(model => model.WebShowName, new { @style = "width:300px;", maxlength = 128 })
            </td>
        </tr>
        <tr>
            <td class="formsecondary"><b>Tags: </b></td>
            <td class="formsecondary">
                @Html.TextBoxFor(model => model.Tags, new { @style = "width:300px;", maxlength = 128 })
            </td>
        </tr>
        <tr>
            <td class="formprimary"><b>Interval in Seconds: <span class="required">*</span></b></td>
            <td class="formprimary">
                @Html.TextBoxFor(model => model.IntervalInSecs, new { @style = "width:300px;", maxlength = 128 })
            </td>
        </tr> 
        <tr>
            <td class="formsecondary"><b>Active: </b></td>
            <td class="formsecondary">
                @Html.EditorFor(model => model.IsActive)
            </td>
        </tr> 
        <tr>
            <td class="formprimary" style="vertical-align: top;height:525px;">
                <b>Available URL Addresses</b><br /><br /> 
                <div  >
                    @Html.DropDownList("lstURLAddress", (SelectList)ViewData["URLAddressList"], new { @style = "width:320px", @multiple = "true", onchange = "ShowView();", size = 10 })
                </div>
                <button class="button" style="background-color:orangered;" type="button" onclick="AddToWebShow();">Add-></button>
                <br /><br /> 
                <a id="URLAddressView" target="_blank" href="#" style="display: inline-block;word-wrap:break-word;width:300px;" href="@(ViewData["URLAddress"])">@(ViewData["URLAddress"])</a>
            </td>
            <td class="formprimary" style="vertical-align: top;height:525px;">
                <b>Web Show URL Addresses</b><br />  <br />
                <div>
                    @Html.DropDownList("lstWebShowURLAddresses", ((SelectList)ViewData["WebShowURLAddressList"]), new { @style = "width:320px;", @multiple = "true", onchange = @"ShowWebShowView();", size = 10 })
                </div>
                <button class="button" style="background-color:red;" type="button" onclick="RemoveFromWebShow();">Remove</button>
                <button class="button" type="button" onclick="MoveItemUp();">Move Up</button>
                <button class="button" type="button" onclick="MoveItemDown();">Move Down</button>
                <br /><br />
                <a id="URLWebShowPreview" target="_blank" href="#" style="display: inline-block;word-wrap:break-word;width:300px;"></a>
            </td>
        </tr>
        <tr>
            <td class="formfooter" colspan="2"><div id="returnlink"><input type="submit" value="Save" style="width:75px;" />@Html.ActionLink("Back to List", "Index")</div></td>
        </tr>
    </table>
    <div class="formfootnote"><span class="required">*</span> indicates a required field.</div>
    <br />
    <div class="errormessage">@Html.Raw((string)ViewData["ValidationMessage"])</div> 
    @Html.Hidden("txtWebShowURLAddresses", ViewData["SlideShowurlAddresses"])
     
}

<script type="text/javascript" lang="javascript">
    // Only allow 0-9 in the Interval field
    $('#IntervalInSecs').keyup(function (event) {
        this.value = this.value.replace(/[^0-9\.]/g, '');
    });
</script>

<br /><br />

